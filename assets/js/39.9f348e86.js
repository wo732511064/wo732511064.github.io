(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{348:function(e,t,a){"use strict";a.r(t);var s=a(0),n=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("ol",[a("li",[a("p",[e._v("原理：\nvue通过Object.defineProperty这个api来实现object响应式原理，他可以检测对象属性的获取和更改。利用这个原理，通过递归的方式，把data对象里的属性包括嵌套对象等进行监测，其中通过getter进行获取数据，setter更新数据。")])]),e._v(" "),a("li",[a("p",[e._v("dep依赖管理器：")])])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("  *依赖收集：\n    在getter这里，vue进行了依赖收集，调用dep.depend()函数。dep是一个依赖管理器，吧某个数据的依赖统一收集起来，他拥有增删改查功能。depend函数内部则调用Dep.target.addDep()函数，而Dep.target此时为watcher实例本身。\n  \n  *依赖更新：\n    在setter这里，vue通过调用dep.notify()来获取更改后的数据，来进行更新，内部则调用了watcher实例的update函数。\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br")])]),a("div",{staticClass:"custom-block warning"},[a("ol",[a("li",[e._v("谁调用了这个数据，也可以讲解为依赖调用了这个数据")]),e._v(" "),a("li",[e._v("依赖有不确定性，调用的次数不唯一")])])]),e._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[e._v("watcher实例：")])]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("  我们所说的谁谁谁调用了数据，可以表达为某个依赖调用了某个数据。实际上这个依赖是watcher实例。当数据被真正的依赖调用时，vue会创建一个watcher实例，然后赋值给Dep.target这个唯一对象，然后再触发getter，通过depend函数吧watcher实例添加到dep依赖管理器。\n\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br")])]),a("div",{staticClass:"custom-block warning"},[a("p",[e._v("watcher实例通过this.getter.call(vm, vm)获取数据触发getter")])]),e._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[e._v("缺点：\nObject.defineProperty无法监测到对象属性的添加和删除、只能监测更改和获取，vue通过封装vue.set()和vue.delete()这个两个api来解决问题。")])])])}),[],!1,null,null,null);t.default=n.exports}}]);